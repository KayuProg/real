<!DOCTYPE html>
<html lang="ja">


<head>
    <meta charset="UTF-8">
    <title>KayuProg-website/かゆウェブサイト</title>
    <link rel="stylesheet" href="../../../common/css/base.css">
    <link rel="stylesheet" href="../actConCss/actConBase.css"> <!--activity contentsのbaseとなるcss-->
    <!--movebg-->
    <link rel="stylesheet" href="../../../common/css/movebg.css"><!--ok-->
    <!--mainSlider-->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css">
    <!--jQuery読み込み-->
    <script src="../../../common/js/jquery-3.6.1.min.js"></script>
    <!--prism.css ソースコード表示させるやつ-->
    <link rel="stylesheet" href="../../../common/css/prism.css">
    <script src="../../../common/js/prism.js"></script>
    <!--animate.css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!--viewport-->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" media="screen and (max-width:1000px)" href="../../../common/css/sp_base.css">
    <link rel="stylesheet" media="screen and (max-width:1000px)" href="../actConCss/sp_actConBase.css"><!--注意！！-->
    <!--自動翻訳禁止-->
    <meta http-equiv="Content-Language" content="ja">
    <meta name="google" content="notranslate">

</head>

<body>


<!--to top button-->
<div class="toTopButton"></div>
<script>
$(document).ready(function(){
    var toTopBtn=$('.toTopButton');
    toTopBtn.hide();
    $(window).scroll(function(){
        if($(this).scrollTop()>100){
            toTopBtn.fadeIn();
            $('.toTopButton').addClass('vvt');//base.cssにある
        }else{
            toTopBtn.fadeOut();
        }
    });
    toTopBtn.click(function(){
        $('body,html').animate(
            {scrollTop:0},500
        );
        return false;
    });
});
</script>


<!--topage=のpage上部遷移-->
<script>
$(document).ready(function(){
    const CheckBtn1 = document.getElementById('tab1');
        CheckBtn1.addEventListener('change', function () {
            $('body,html').animate(
               {scrollTop:0},500
         );
        });

    const CheckBtn2 = document.getElementById('tab2');
    CheckBtn2.addEventListener('change', function () {
        $('body,html').animate(
            {scrollTop:0},500
        );
    });

    const CheckBtn3 = document.getElementById('tab3');
    CheckBtn3.addEventListener('change', function () {
        $('body,html').animate(
            {scrollTop:0},500
        );
    });
    
    const CheckBtn4 = document.getElementById('tab4');
    CheckBtn4.addEventListener('change', function () {
        $('body,html').animate(
            {scrollTop:0},500
        );
    });

    const CheckBtn5 = document.getElementById('tab5');
    CheckBtn5.addEventListener('change', function () {
        $('body,html').animate(
            {scrollTop:0},500
        );
    });
    }
);
</script>


<!--===============================================================
    header
===============================================================-->
<!--header-->
<hr size="15px" color="black">
<div class="headbg headerSticky">
    <!--header mainmenu-->
    <div class="headerCenter">
        <a href="../../../index.html" class="alogo"><div class="logobg"> <div class="logo">KayuProg</div> </div></a>
    <ul class="mainmenu">
        <li><a href="../../../term/Kayuprog利用規約.pdf" class="amainmenu" target="_blank">
            <div class="mainmenuContents mainmenuContents1 fb">Terms</div>
        </a></li>
        <li><a href="../../../index.html" class="amainmenu"><div class="mainmenuContents mainmenuContents1">HOME</div></a></li>
        <li><a href="../../../activity/activity.html" class="amainmenu"><div class="mainmenuContents mainmenuContents2">ACTIVITY</div></a></li>
        <li><a href="../../../contact/contact.html" class="amainmenu"><div class="mainmenuContents mainmenuContents3">CONTACT</div></a></li>
    </ul>
    </div>
</div>

<!--movebg-->
<div id="particles-js"></div>
<div id="wrapper"></div>


<!--bodycontents-->
<div id="bodycontents">
<!-- sliderposition -->

<!--===============================================================
    maincontents    
===============================================================-->

<div class="mainContentsPa"><!--内部コンテンツの位置決め-->

<!--上のタブ選択部分-->
<input id="tab1" type="radio" name="check" checked class="a">
<label for="tab1" class="pagetabTop">Page 1</label>

<input id="tab2" type="radio" name="check">
<label for="tab2" class="pagetabTop">Page 2</label>

<input id="tab3" type="radio" name="check" >
<label for="tab3" class="pagetabTop">Page 3</label>

<input id="tab4" type="radio" name="check" >
<label for="tab4" class="pagetabTop">Page 4</label>

<input id="tab5" type="radio" name="check" >
<label for="tab5" class="pagetabTop">Page 5</label>

<!--タブ選択によるコンテンツ部分-->
<div class="pages"><!--全ページの全体的なスタイルを指定するため-->
        
<!--===============================================================
    fmin:：明朝体　fen：英語のかっこいい字体　fgo：ゴシック　fb：太字　ib：インラインブロック
    red：赤字　blue：青字　bgred：背景赤　bgyellow：背景黄色
    big：大きい文字　middle：普通の文字　small：小文字
    imgfullleft：アイキャッチと同じ大きさで左寄せ imgfullcenter：アイキャッチと同じ大きさで中央
    imgfullright：アイキャッチと同じ大きさで右寄せ imghalf：半分半分
    imghalfleft：半分で左寄せ　imghalfcenter：半分で真ん中　imghalfright：半分で右寄せ
    flex：flex横配置

    ctrl+Eでタグで囲める．
===============================================================-->

<!--１ページ目-->
<div id="page1" class="panel">
    <span class="aCUpDate">Posted:&nbsp;2002/09/10</span>&nbsp;&nbsp;
    <span class="aCReUpDate">RePosted:&nbsp;0000/00/00</span>
    <div class="aChead">\\&nbsp;KayuProg&nbsp;&nbsp; Storage&nbsp;//</div><hr class="cp_hr06" />
    <h2 class="aCtitle"><span>01</span>TITLE</h2>
    <img class="aCeyecatch" src="img/" width="%">

    <!--actmaincontents-->
    <p class="headline" style="margin-top:40px;">head</p>
        アラームの音が好きじゃない．起きたときにストレスになってしまう．
        だから，アラームの代わりに音楽を流したい．
        既にスマホで好きなアラーム音にできる方法があるが，いちいちダウンのロードや曲の長さを調整しなくてはいけない．
        そこで，youtubeのアラーム専用再生リストを作成し，その中の音楽を自動的に流すシステムを作る．



        https://note.com/misuzu_neccos/n/nb44905f4f7e8
        よりyoutube data APIで再生リストの情報を取得できるらしい．
        これを使おう．

        いつもどおりGoogle outh2.0に言ってプロジェクト作って，クライアントIDなどを作って，jsonファイルをダウンロードする．
        https://developers.google.com/youtube/v3/getting-started?hl=ja#%E4%BE%8B-1
        このサイトに従えば何とかなる．

        https://developers.google.com/youtube/v3/code_samples/code_snippets?hl=ja&apix_params=%7B%22part%22%3A%5B%22snippet%2CcontentDetails%22%5D%2C%22maxResults%22%3A25%2C%22mine%22%3Atrue%7D
        ここにあるサンプルプログラムを参考にして作成する．


        サンプルプログランむ実行すると次のエラーが出ます．
  File "c:\Users\katayama\Desktop\Programming\Python\projects\youtube_alarm_clock\main.py", line 41, in <module>
    main()
  File "c:\Users\katayama\Desktop\Programming\Python\projects\youtube_alarm_clock\main.py", line 27, in main
    credentials = flow.run_console()
                  ^^^^^^^^^^^^^^^^
AttributeError: 'InstalledAppFlow' object has no attribute 'run_console'
Google API の google-auth-oauthlib の InstalledAppFlow では、通常 run_local_server() 
または run_console() を使用しますが、run_console() は古いバージョンのメソッドであり、現在のバージョンでは run_local_server() を使用するのが推奨されています。
        らしいです．



        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:3vw 2vw 0px 2vw">
            プログラムを実行してアカウントの認証していたら
            <img src="./img/client_error.png" class="imgfullcenter"><br><br>
            アクセスをブロック: youtube_alarm_clock は Google の審査プロセスを完了していません

katayama0910yuuki@gmail.com
youtube_alarm_clock は Google の審査プロセスを完了していません。このアプリは現在テスト中で、デベロッパーに承認されたテスターのみがアクセスできます。アクセス権があると思われる場合は、デベロッパーにお問い合わせください。
youtube_alarm_clock のデベロッパーの場合は、エラーの詳細をご確認ください。
エラー 403: access_denied
            というエラーに遭遇した．
            https://zenn.dev/larva06/articles/google-oauth-access-blocked-error
            やっと見つけた．このサイトに書いてある．
            <img src="./img/solution1.png" class="imgfullcenter"><br><br>
            <img src="./img/solution2.png" class="imgfullcenter"><br><br>
            ここのテスト中というのがよくない．本番環境にpushするという物をしなくてはいけないらしい．
            そもそもここにどうやって行くのかというと，
            Google Cloud Console→任意のプロジェクトに切り替える→APIとサービス→OAuth認証画面→対象
            <img src="./img/solution3.png" class="imgfullcenter"><br><br>
            <img src="./img/solution4.png" class="imgfullcenter"><br><br>
            <img src="./img/solution5.png" class="imgfullcenter"><br><br>
            <img src="./img/solution6.png" class="imgfullcenter"><br><br>
            するとこんな風に認証できる．ここに気づくのにすごく時間がかかってしまった．．．
            ほんと良く解決したと思う．
        </p>

        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:3vw 2vw 0px 2vw">
            まず，こんな感じのライブラリのインストールが必要です．
            pip install --upgrade google-auth google-auth-oauthlib google-auth-httplib2 google-api-python-client

            現状こんな感じのプログラム．まだ，request.execute()でエラーが出る．
            # -*- coding: utf-8 -*-

# Sample Python code for youtube.playlists.list
# See instructions for running these code samples locally:
# https://developers.google.com/explorer-help/code-samples#python

import os

import google_auth_oauthlib.flow
import googleapiclient.discovery
import googleapiclient.errors

scopes = ["https://www.googleapis.com/auth/youtube.readonly"]

def main():
    # Disable OAuthlib's HTTPS verification when running locally.
    # *DO NOT* leave this option enabled in production.
    os.environ["OAUTHLIB_INSECURE_TRANSPORT"] = "1"

    api_service_name = "youtube"
    api_version = "v3"
    client_secrets_file = "./jsons/client.json"

    # Get credentials and create an API client
    flow = google_auth_oauthlib.flow.InstalledAppFlow.from_client_secrets_file(
        client_secrets_file, scopes)
    credentials = flow.run_local_server()
    youtube = googleapiclient.discovery.build(
        api_service_name, api_version, credentials=credentials)

    request = youtube.playlists().list(
        part="snippet,contentDetails",
        maxResults=25,
        mine=True
    )
    # response = request.execute()

    # print(response)

if __name__ == "__main__":
    main()

            プログラム内での認証方法について．このままのプログラムでは毎回手動で認証する必要がある．
            めんどくさいので，前回のplan_bulletinで使用したプログラムを参考に自動的に認証する方法を使用する．
            最終的な認証までのプログラムは次


import os
from google.auth.transport.requests import Request
import google_auth_oauthlib.flow
import googleapiclient.discovery
import googleapiclient.errors
from google.oauth2.credentials import Credentials
from googleapiclient.errors import HttpError


SCOPES = ["https://www.googleapis.com/auth/youtube.readonly"]

json_pass="./jsons/token.json"
client_secrets_file = "./jsons/client.json"


def main():
    # Disable OAuthlib's HTTPS verification when running locally.
    # *DO NOT* leave this option enabled in production.
    os.environ["OAUTHLIB_INSECURE_TRANSPORT"] = "1"

    # Get credentials and create an API client
    
    creds = None#認証情報を格納する変数

    if os.path.exists(json_pass):
        creds = Credentials.from_authorized_user_file(json_pass, SCOPES)
    # If there are no (valid) credentials available, let the user log in.
    if not creds or not creds.valid:
        if creds and creds.expired and creds.refresh_token:
            creds.refresh(Request())
        else:
            # flow = InstalledAppFlow.from_client_secrets_file("./jsons/client.json", SCOPES)
            # creds = flow.run_local_server(port=0)
            flow = google_auth_oauthlib.flow.InstalledAppFlow.from_client_secrets_file(client_secrets_file, SCOPES)
            creds = flow.run_local_server(port=0)
        # Save the credentials for the next run
        print("\n",creds,"\n")
        with open(json_pass, "w") as token:
            token.write(creds.to_json())
    
    youtube = googleapiclient.discovery.build("youtube","v3", credentials=creds)

    request = youtube.playlists().list(
        part="snippet,contentDetails",
        maxResults=25,
        mine=True
    )
    
    response = request.execute()

    print(response)

if __name__ == "__main__":
    main()

    
    youtube = googleapiclient.discovery.build("youtube","v3", credentials=creds)
            こうすることでいちいち手動でアカウントの認証をしなくてよくなる．とりあえずここまでのコードで認可されたアカウントの再生リストまでは取得できているはず．
        </p>


        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:3vw 2vw 0px 2vw">
            https://zenn.dev/yorifuji/articles/youtube-data-api
            このサイトやdocumentを参考に情報を取得していく
            request = youtube.playlists().list(
                part="snippet,contentDetails",
                # maxResults=25,
                mine=True  # 認証されたアカウントのプレイリストを取得
            )
            response = request.execute()
    
            # 結果を表示
            for playlist in response.get("items", []):
                print(f"🎵 {playlist['snippet']['title']} (ID: {playlist['id']})")
            でまず，プレイリストのidをしゅとくする．
            try:
            # 指定されたプレイリストの動画を取得
            request = youtube.playlistItems().list(
                part="snippet,contentDetails",
                maxResults=25,  # 取得する最大件数（最大50）
                playlistId="PL8G4Ylahsmrrf6_uMWaQGNUBOf8COtlK5"  # 取得したいプレイリストのID
            )
            response = request.execute()
    
            # 結果を表示
            # print(f"🎵 プレイリスト内の動画一覧（ID: PL8G4Ylahsmrrf6_uMWaQGNUBOf8COtlK5）:")
            for item in response.get("items", []):
                # print(item)
                # video_title = item["snippet"]["title"]
                video_id = item["contentDetails"]["videoId"]
                # print(f"URL is (https://www.youtube.com/watch?v={video_id})")
                urls.append(f"https://www.youtube.com/watch?v={video_id}")

            このコードでlist内の動画のurlのみを抽出する．
        </p>

        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:3vw 2vw 0px 2vw">
            pythonで定期実行とかさせたいときスリープが邪魔になるかも
            （windows10）
            https://gogocatslife.com/20230506_python_auto_record/
            
            （windows11）
            https://gogocatslife.com/20231223_windows11_auto_record/


            ここ参照すれば解決するかも


            どうやらタスクスケジューラだけでやるには少し難しそう
            https://qiita.com/yoinhu/items/8a1d49f17207d40a68dc
            ここに解決策が書いてある．
        </p>

        <p class="headline" style="margin-top:40px;">   おもいついた</p>
        <p style="margin:3vw 2vw 0px 2vw">
            ここで計画変更．上のサイトではwindowsで設定できるタスクスケジューラの実行時にスリープを解除する方法であった．
            なので，今回作りたいアラームでは起床時刻にスリープを解除する必要がある．起床時刻を設定するタイミング，起床時刻の二つでスリープを解除する必要がある上に
            スリープ解除の時間設定が複雑になってしまう．なので，以下の方法にすることにした．

            天気を教えてくれるラズパイにこの機能をつける
            時間の入力，アラームを止めるのはtemuでかったアイパッドから．
            翌日の起床時間を入力するためのポップアップを画面に表示させる．
            入力する場所とかの構想とかは作ってもいいかもね．


            いまするべきは，動画をアラームとして使う方法の部分．
            東京戻ったらラズパイへの実装と入力システムを作る．

            ラズパイはweatherを知らせるシステムで常に動作しているのでそこにかさねる形でこの機能を追加する．
            つまり，ラズパイ上でもう一個このアラームのプログラムを走らせるということ．
            もしかしたら，メモリが足りなくなってしまう可能性がある．そん時はどうしよう．raspi zero wでも使おうかな．
        </p>


        <p class="headline" style="margin-top:40px;">youtubeから音声のみを取得する．</p>
        <p style="margin:3vw 2vw 0px 2vw">
            起床時のアラームには音声のみで言い．
            urlからwindowを開いて再生する方法もあるが，広告が再生されてしまう可能性がある．
            まぁこれもbrave使えば大丈夫なんだけど．．
            一応それ用のスクリプト張っときます．

            #動画を再生するための関数．windowで開く．
import time
import webbrowser

def player(movie_url):
    # time.sleep(5)
    #&t=0は初めから再生するため
    url = movie_url+"&t=0"  # 完全なURLを指定
    browser_path = r"C:\Program Files\BraveSoftware\Brave-Browser\Application\brave.exe"
    webbrowser.register('brave', None, webbrowser.BackgroundBrowser(browser_path))  # Braveを登録
    browser = webbrowser.get('brave')  # Braveを取得
    browser.open(url)  # URLを開く
    print(1)
    return 0


player("https://www.youtube.com/watch?v=TdeYkT7DEJQ")


if __name__ == "__main__":
    main()
    
            youtubeから音声を取ることができれば自作でmusic FMようなものが作れる．
            これを次の製作物にしようと考え，その前段階として今回，youtubeの音声のみを取り出すことにした．
            https://developers.google.com/youtube/terms/developer-policies?hl=ja
            一応このサイトで規約を読んでおこう．

            ＜映像と音声のコンテンツ＞

            お客様およびお客様の API クライアントは、以下の行為を実行したり、他のユーザーに推奨、許可、要求したりしてはなりません。

            ・YouTube から事前に書面による承認を得ない限り、YouTube の映像と音声のコンテンツのコピーをダウンロード、インポート、バックアップ、キャッシュに保存、保存する
            ・コンテンツをオフライン再生できるようにする．
            ・YouTube API サービスのいずれかの要素を使用して、著作権侵害または著作権侵害コンテンツの不正使用を助長または促進する。
            
            うん．ちゃんとやっちゃダメって書いてある．


            https://jitantech.com/how-to-fix-pytube-bad-request/
            このサイト見たらそのままできた．ただ注意しなきゃいけないのが
            from moviepy.editor import *
            の部分．これだとエラーが出る．
            from moviepy import *
            だと大丈夫
            これはmoviepyのアップデートでライブラリ内の構造が変化したことによる．


            https://jp.videoproc.com/edit-convert/how-to-download-and-install-ffmpeg.htm
            ここにffmpegをどのように使うか．これが一番わかりやすい気がする．windows,linuxどれのやり方も書いてある．



            
import yt_dlp
import time
import random

def download_youtube_audio_as_mp3(url, output_path):
    # カスタムUser-Agentを設定（YouTubeに自動スクリプトとバレにくくする）
    user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"

    # yt-dlp のオプションを設定
    ydl_opts = {
        'format': 'bestaudio/best',  # 最高品質の音声を選択
        'outtmpl': output_path + ".mp3",  # 保存ファイル名
        'postprocessors': [{
            'key': 'FFmpegExtractAudio',
            'preferredcodec': 'mp3',
            'preferredquality': '192',  # ビットレート設定
        }],
        'nocheckcertificate': True,  # 証明書エラーを無視
        'noplaylist': True,  # プレイリスト全体のダウンロードを防ぐ
        'quiet': True,  # 不要なログを抑える
        'user_agent': user_agent, # カスタムUser-Agentを設定
         'ffmpeg_location': r'C:\Program Files\ffmpeg-master-latest-win64-gpl-shared\ffmpeg-master-latest-win64-gpl-shared\bin',
    }

    # ランダムな遅延を入れてアクセスを分散（Bot対策）
    delay = random.uniform(1.5, 3.0)
    print(f"Waiting for {delay:.2f} seconds before download...")
    time.sleep(delay)

    # YouTubeの音声をダウンロード
    with yt_dlp.YoutubeDL(ydl_opts) as ydl:
        ydl.download([url])

# YouTube動画のURLと保存先のファイル名（拡張子なし）を指定
download_youtube_audio_as_mp3('https://www.youtube.com/watch?v=ekr2nIex040', 'apt')


            最終的にこのスクリプトで音声データのダウンロードを行うことにした．
            特に大事なのが，
            https://jp.videoproc.com/edit-convert/how-to-download-and-install-ffmpeg.htm
            を参考にffmpegをダウンロードして環境変数を通す．そして
            'ffmpeg_location': r'C:\Program Files\ffmpeg-master-latest-win64-gpl-shared\ffmpeg-master-latest-win64-gpl-shared\bin',
            とプログラムにffmpegのbinの位置を明示的に示す事．

        </p>

        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:3vw 2vw 0px 2vw">
            時刻の入力にguiを用いることを考えている．
            そこでpysimple guiを使おうと考えた．
            しかし，有料化されてしまっており，使いたくなくなってしまった．
            新しい大体ライブラリを発見．
            https://note.com/kohaku935/n/n8479f5ddd577
            2024.4に生まれたばかりのやつ！
            このサイトに書いてある．tkeasy guiである．
            構文は結構pysimple guiに似ており簡単に実装できそう．
            これを使って時刻を入力するシステムを作っていこう．
            installもこのライブラリonlyで簡単！
            https://note.com/sirodon_256/n/na73d3fdac68d
            ここにサンプルコードの解説が乗っていてこれを参照しながら作っていこう．

            tkeasyguiで中央配置に困ったら，layoutを作成するときに，
            [sg.Push(),sg.Input(justify="center",expand_x=1,size=[5,5]),sg.Push()], 
            のように左右にsg.Push()を追加すると中央配置になる．

            [sg.Push(),sg.Column([
            [sg.Text("何時に起きますか？", text_align="center",expand_y=True),],
        ], expand_y=True)
         ,sg.Push()]N
         y方向に垂直配置したい時も同様にexpand_y=1を指定して上下をsg.Pushで囲めば良い．
         やっぱうまくいかないからpaddingで調整するわ．


        </p>

        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:3vw 2vw 0px 2vw">
            起きる時間は何かしらテキストファイルから読み取ることにする．
            起きる時間を書き換えたいときは書き換える専用のボタンを作ろう．
        </p>

        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:2vw 2vw 0px 0vw">
            valueを変更したいとき
            sg.Input("", key="hour",font=input_font,size=[5,5]), sg.Text("時", font=("Helvetica", 50),expand_y=True),
            みたいな感じでkeyを設定する．
            window["hour"].update("9")
            として変更する．
        </p>
        <p class="headline" style="margin-top:40px;">.txtを書き換える</p>
        <p style="margin:2vw 2vw 0px 0vw">
            ここで，.writeはstrである必要がある．
            with open("a.txt", "r+", encoding="utf-8") as file:
                file.seek(0)
                file.write(str(time))
                file.truncate()  # 余計な部分を削除
            
        
        </p>

        <p class="headline" style="margin-top:40px;">非同期関数を使う</p>
        <p style="margin:2vw 2vw 0px 0vw">
            timerとして時間を計測しながら他の処理（ボタンの処理）を行うことができなかった．
            なので，一度非同期関数を用いて実装してみる．
            いや，非同期関数だと処理を一度に投げて返ってくるまで待つというのが基本だからやりたいこととは少し違う．
            やりたいことは，
                １．timerとして.txtに記された時間になったら音声を流す処理
                ２．ボタンによる時刻変更があったら.txtの時刻を書き換える処理
            この二つを走らせたい．
            だから，threadingを使うことにする．
            https://zenn.dev/nekoallergy/articles/py-advance-threading-01
            https://qiita.com/tchnkmr/items/b05f321fa315bbce4f77
            ここら辺のthreadingに関する記事がわかりやすかった．


            threadingについて
            もしa.pyというスクリプトでflag=0と初期化していたとする．a.py内ではflag=1と再設定するスクリプトが書かれているとする．
            つまり次のようなスクリプト
            flag=0
            def b_ex():                
                if flag==0:
                        flag=1
                        print("hello")
                
            といった具合のスクリプト
            この関するb_exをthreadingで複数走らせるとする．
            まず一個目のスレッドでb_ex()を実行するとメモリ内の変数flagは1に書き換えられ，helloと表示される．
            ここで，二個目のスレッドでb_ex()を実行すると再びhelloと表示される．
            わたしはこれがおかしいと思った，一個目のスレッドでflagを1と再定義したのに次のthreadでは再びflagが0に戻っていたということだからである．
            なのでthreadが違うとメモリが分割？されて処理されるが，前のスレッドで変更されたflagのような変数の変化は反映されない．
            なので，flagによるthreadでの処理の違いを作ろうとするには，外部に.txtなどのファイルを作成し，そこに書き込む形で実装する必要がある．
            なので，今回はtimer_flag.txtというファイルを作成した．
            そこに記述されている数字が0ならばtimerを実行，1ならば何もしないという処理をthreadで行うことにした．
        </p>

        <p class="headline" style="margin-top:40px;">スレッド処理をしていてctrl+cで終了しないとき</p>
        <p style="margin:2vw 2vw 0px 0vw">
            thread = threading.Thread(target=hoge, name='hogehoge')
            thread.start()
            と実行していたところに，
            thread = threading.Thread(target=hoge, name='hogehoge',daemon=True)
            thread.start()
            としてdaemon=Trueと指定すば良い．
        </p>

        <p class="headline" style="margin-top:40px;">非同期処理</p>
        <p style="margin:2vw 2vw 0px 0vw">
            音声を流している間に次の音声をダウンロードしておく．
            これを非同期関数で実行する．
            threadingでない理由は，threadingの特性上，全体で時間の短縮が見込めないためである．
            https://qiita.com/everylittle/items/57da997d9e0507050085
            このサイトを参考にした．
            実装したけどダメでした．おそらく原因は音が鳴っているときはthreadが占有されてしまっていて他の処理ができなくなっている．
            なのでthreadingでやってみよう．
            https://zenn.dev/nekoallergy/articles/py-advance-threading-01
            threadの引数については
            https://meiei.hatenablog.com/entry/2019/12/17/213639
            を使いました．
            非同期処理の時と同様でした．

            うーん
            multiprocessingに手を出すか？
            
        </p>


        <p class="headline" style="margin-top:40px;">ラズパイに実装したがpythonのversionが低かった</p>
        <p style="margin:2vw 2vw 0px 0vw">
            pythonのversionが3.9のままでtkeasayguiを実行する際にエラーが出てしまったのでpythonをupdateする．
            https://blog.goo.ne.jp/espiya/e/6b7f4d66b7253b4eb31cce32e0609a30
            ここを参照した．
            https://www.creativevillage.ne.jp/category/topcreators/web-creator/web-programmer/128983/#%E3%80%90%E6%9C%AA%E5%B0%8E%E5%85%A5%E3%81%AE%E3%82%B1%E3%83%BC%E3%82%B9%E3%80%91Python%E3%81%AE%E5%B0%8E%E5%85%A5%E6%96%B9%E6%B3%95
            こっちのほうがわかりやすいかも
            https://docs.kanaries.net/ja/topics/Python/how-to-update-python
            pythonの更新だからこっちか？
            結局GPTに頼った．
            python3 --version
            sudo apt update
            sudo apt upgrade -y
            sudo apt install -y build-essential libffi-dev libssl-dev \
                zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev \
                libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev \
                liblzma-dev libgdbm-dev libnss3-dev
            cd /usr/src
            sudo wget https://www.python.org/ftp/python/3.11.9/Python-3.11.9.tgz
            sudo tar xzf Python-3.11.9.tgz
            cd Python-3.11.9
            sudo ./configure --enable-optimizations
            sudo make -j$(nproc)
            sudo make altinstall
            sudo update-alternatives --install /usr/bin/python3 python3 /usr/local/bin/python3.11 1
            sudo update-alternatives --config python3
            python3 --version
            python3 -m ensurepip --default-pip
            python3 -m pip install --upgrade pip

            pyenvでpythonを管理しているなら，
            pyenv global system
            のコマンドで変更する．
                                        
        </p>

        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:2vw 2vw 0px 0vw">
            gcc: fatal error: Killed signal terminated program cc1
            compilation terminated.
            make[3]: *** [Makefile:2523: Python/Python-ast.o] Error 1
            make[3]: Leaving directory '/usr/src/Python-3.11.9'
            make[2]: *** [Makefile:774: build_all_generate_profile] Error 2
            make[2]: Leaving directory '/usr/src/Python-3.11.9'
            make[1]: *** [Makefile:750: profile-gen-stamp] Error 2
            make[1]: Leaving directory '/usr/src/Python-3.11.9'
            make: *** [Makefile:762: profile-run-stamp] Error 2
            みたいなエラーが出たとき，raspiのメモリ不足が原因．
            スワップを増やして対処する．            
            free -m#スワップの量を確認
            sudo dphys-swapfile swapoff  # スワップを無効化
            sudo sed -i 's/CONF_SWAPSIZE=.*/CONF_SWAPSIZE=2048/' /etc/dphys-swapfile  # 2GB に変更
            sudo dphys-swapfile setup  # 設定を適用
            sudo dphys-swapfile swapon  # スワップを有効化
            
            

        </p>

        <p class="headline" style="margin-top:40px;">moduleが見つからないというエラー</p>
        <p style="margin:2vw 2vw 0px 0vw">
            export PYTHONPATH=$PYTHONPATH:/home/kayu/.local/lib/python3.12/site-packages
            python3 ./main.py
            として実行することで行ける．
        </p>

        <p class="headline" style="margin-top:40px;">定期実行</p>
        <p style="margin:2vw 2vw 0px 0vw">
            定期実行の方法はcronを使うことにした．
            ログの確認方法つぎ
            tail -f /var/log/syslog

        </p>
        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:2vw 2vw 0px 0vw">
            _tkinter.TclError: no display name and no $DISPLAY environment variable
            というエラー
            https://forums.raspberrypi.com/viewtopic.php?t=234038#p1432014
            によると
            An application that creates an X-windows client can only usefully be run in an environment where it has access to an X-windows server to render the display in a graphical form.

The cron process does not have such access by default. The autostart mechanism in an individual user's account does.
            らしい．つまり，cronを使ってのGUI生成はできないことがわかった．
            別の方法を探そう．
        </p>
        
        <p class="headline" style="margin-top:40px;">Systemd</p>
        <p style="margin:2vw 2vw 0px 0vw">
            https://monomonotech.jp/kurage/raspberrypi/systemd_timer.html
            を参考にしてみる．
            sudo nano /etc/systemd/system/alarm.timer
            sudo systemctl enable /etc/systemd/system/alarm.timer
            実装したけど，実行はできる．
            多分ラズパイの仕組み的に定期実行ではGUIでの画面生成はできないのかもしれない．

            https://qiita.com/kutzoa/items/6f8721bd9c381791912d
            に定期実行によるラズパイでのgui生成について書かれている．
            だめでした．

            https://tomosoft.jp/design/?p=11697
            こんどはこっちを見ながらいじってみるｌ


            /etc/systemd/system/alarm.service      
            うまくいきませんでした．
            sudo systemctl enable /etc/systemd/system/alarm.timer
            これで有効化
            sudo systemctl daemon-reload
            ファイル編集した場合はこれを実行．

            https://raspberrypi.stackexchange.com/questions/117006/help-launching-tkinter-on-boot-pi-3
            ついにできた！やっとできた！
            このサイトを参考にしたらできた．めっちゃ嬉しい！about:blank#blocked
            [Unit]
            Description=GUI Start
            After=graphical.target
            Wants=graphical.target

            [Service]
            User=pi
            Group=pi
            Environment="DISPLAY=:0.0"
            Environment="XAUTHORITY=/home/pi/.Xauthority"
            #ExecStartPre=/usr/bin/printenv
            ExecStart=/usr/bin/python3 /home/pi/ampolas/ampolas.py

            [Install]
            WantedBy=graphical.target
            という風にserviceファイルに書き込めばいい．
            network関連の設定が終わった後に実行したいときは
            unitにAfter=network.targetを追記すればよい


            注意がuserとGroupをちゃんと確認すること，実際に使ったスクリプトは次．
[Unit]
Description = run youtube alarm
After=graphical.target
Wants=graphical.target

[Service]
User=kayu
Group=kayu
Environment="DISPLAY=:0.0"
#ExecStartPre=/usr/bin/printenv
ExecStart=/home/kayu/Desktop/alarm.sh
workingDirectory=/home/kayu/Desktop/youtube_alarm_clock

[Install]
WantedBy=graphical.target




            
            timer側はこれ
            [Unit]
            Description=Run youtube alarm
            After=network.target
            
            [Timer]
            OnCalendar=*-*-* 09:53:00
            
            
            
            [Install]
            WantedBy=timers.target
            
            
            ただの定期実行は
            https://monomonotech.jp/kurage/raspberrypi/systemd_autostart.html

            ラズパイ5環境でsystemdだとblootootheのaudio再生はできないが，~/.profileだと可能みたい．
            
            

        </p>

        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:2vw 2vw 0px 0vw">
            らずぱい上で
            ERROR: Postprocessing: ffprobe and ffmpeg not found. Please install or provide the path using --ffmpeg-location

            一応windowsはこれ
            https://denshigomi.com/%E3%80%90yt-dlp%E3%80%91error-postprocessing-ffprobe-and-ffmpeg-not-found%E3%81%AE%E8%A7%A3%E6%B1%BA%E6%B3%95/

            <!-- https://qiita.com/fujino-fpu/items/e6857e2703c9b7f2add1
            でラズパイにffmpeg導入
 -->

           
        </p>


        
        <p class="headline" style="margin-top:40px;">mmal not foundについて</p>
        <p style="margin:2vw 2vw 0px 0vw">
            https://github.com/cedricve/raspicam/issues/103
            を見てみると
            MMAL was removed from the raspberry pi about 4 years agoらしいです．
            そりゃいくらやっても無理だわ．
            やっぱGPTに頼り過ぎるのは良くないね．
            ffmpegのインストールには
            https://dualbalance.net/2023/06/09/458/
            を参照したほうがよさそう．

            ffmpegのこｎエラーに関しては
            ydl_opts = {
                'format': 'bestaudio/best',  # 最高品質の音声を選択
                # 'outtmpl': output_name + ".mp3",  # 保存ファイル名
                'outtmpl': output_name,  # 保存ファイル名
                'postprocessors': [{
                    'key': 'FFmpegExtractAudio',
                    'preferredcodec': 'mp3',
                    'preferredquality': '192',  # ビットレート設定
                }],
                'nocheckcertificate': True,  # 証明書エラーを無視
                'noplaylist': True,  # プレイリスト全体のダウンロードを防ぐ
                'quiet': True,  # 不要なログを抑える
                'user_agent': user_agent, # カスタムUser-Agentを設定
                'ffmpeg_location': '/usr/local/bin/ffmpeg',  # 正しいffmpegのパスを指定
                #'ffmpeg_location': r'C:\Program Files\ffmpeg-master-latest-win64-gpl-shared\ffmpeg-master-latest-win64-gpl-shared\bin',
            }
            というようにffmpeg_locationを設定すればよい
            もしかしたらmp3のエンコーダがラズパイ上にないかもしれない．
            そういう時は
            ffmpeg -codecs | grep encoder
            を実行してエンコーダでlibmp3lameやlibopusがないかを確認．
            無ければ次でインストール
            sudo apt install libmp3lame-dev　libopus-dev

            libmp3は上コマンドでは浮かくいかなかった．
            http://blog.k-tai-douga.com/article/10401376.html
            に従ってinstallする．versionは最新のもの（現在だと3.100）を入れるのが無難．
        </p>
        <p class="headline" style="margin-top:40px;">makeを早く終わらせたい</p>
        <p style="margin:2vw 2vw 0px 0vw">
            makeを早く終わらせたいときは
            make -j$(nproc)
            としてメモリを贅沢に使って終わらせましょう．
            make -j$(( $(nproc) * 2 ))
            とすることもできるが，メモリが不足してスワップが発生し，逆に処理が遅くなるかもしれないから注意
        </p>
        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:2vw 2vw 0px 0vw">
            http://fftest33.blog.fc2.com/blog-entry-39.html
            によるとffmpegをビルドする際にはlibmp3lameを組み込んでビルドしないとmp3のライブラリが使えないらしい
            なのでもう一度いちから頑張る．
            まず，ビルドしたフォルダーまで行って

            ffmpegのフォルダにて
            sudo make uninstall
            sudo rm -rf /usr/local/bin/ffmpeg /usr/local/lib/libav* /usr/local/include/libav*
            cd ~
            git clone https://git.ffmpeg.org/ffmpeg.git ffmpeg
            cd ffmpeg
            これでuninstallから再度git clone までが終わった．

            
            どこか別のフォルダで（今回は/home/kayu/downloads/）
            # ダウンロードしたファイルを解凍
            tar -xvzf lame-3.100.tar.gz
            cd lame-3.100

            # ビルドとインストール
            ./configure
            make -j4
            sudo make install
            でlame-3.100に移動して一度make
            cd ~/ffmpeg  # ffmpegのソースコードディレクトリに移動

            # 再ビルドの設定（libmp3lameを有効にする）
            ./configure --enable-gpl --enable-libmp3lame --enable-libx264 --enable-libopus --enable-shared
            実行すると
            ERROR: x264 not found using pkg-config
            というえらーが出た．
            sudo apt install -y libx264-dev
            パッケージ導入．
            解決
            # ビルド
            make -j4  # 並列でビルド
            これが超時間かかる1時間以上かな．
            
            # インストール
            sudo make install
            このコマンドでlibmp3lameを有効にしながらmake            
            ffmpeg -codecs | grep libmp3lame
            これでちゃんとlibmp3lameが入っているか確認．
            DEAIL. mp3                  MP3 (MPEG audio layer 3) (decoders: mp3float mp3) (encoders: libmp3lame)
            と表示されればOK
            再ビルドしてもダメなときはffmpegを一度消去してから再インストールするといい．
           

            kayu@raspberrypi:~ $    ffmpeg -codecs | grep libmp3lame
            ffmpeg: error while loading shared libraries: libavdevice.so.62: cannot open shared object file: No such file or directory
            と出たとき
            sudo ldconfig -v | grep libavdevice
            としてライブラリの位置を確認．
            sudo ldconfig
            でキャッシュ更新．これで大丈夫．
            もしくは
            echo 'export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH' >> ~/.bashrc
            source ~/.bashrc
            でもよさそう．


            
        </p>

        <p class="headline" style="margin-top:40px;">実際に行ったこと</p>
        <p style="margin:2vw 2vw 0px 0vw">
            https://dualbalance.net/2023/06/09/458/
            を参照して
            tar zxfv ffmpeg-6.0.tar.gz
            までやる．
            次に
            sudo apt install libmp3lame-dev　libopus-dev
            sudo apt install libx264-dev pkg-config
            をしておく．
            で，cd ffmpet-6.0まで行って
            ./configure --enable-gpl --enable-libmp3lame --enable-libx264 --enable-libopus --enable-shared
            をする
            で
            make -j$(nproc)
            de
            sudo apt update
            sudo apt install --reinstall ffmpeg libavdevice-dev
            yatet

        </p>


        <p class="headline" style="margin-top:40px;">音デカすぎ問題</p>
        <p style="margin:2vw 2vw 0px 0vw">
            音がでかすぎて近所迷惑が確定する．
            なので，どうにかいい感じに音を小さくする方法を模索する．
            https://pypi.org/project/volume-control/
            にしたがったらいけた．
        </p>


        <p class="headline" style="margin-top:40px;">完全に物故割れた</p>
        <p style="margin:2vw 2vw 0px 0vw">
            ラズパイを電源からぶっちしてたらdisplayの表示がされなくなり，積みました．
            https://dev.classmethod.jp/articles/restore-the-raspberry-pi-4-model-b-os-destroyed-by-a-biginner/
            microsd内のデータの不整合が原因だそうです．
            やっちまったぁぁぁぁぁ


            alarm.sh
            cd /home/kayu/Desktop/youtube_alarm_clock/
            export PYTHONPATH=$PYTHONPATH:/home/kayu/.local/lib/python3.12/site-packages
            #python3 ./main.py
            #python3 /home/kayu/Desktop/youtube_alarm_clock/main.py >> "$LOG_FILE" 2>&1
            python3 /home/kayu/Desktop/youtube_alarm_clock/main.py

            # Python ƒXƒNƒŠƒvƒg‚ÌƒpƒX‚ðŽw’è
            #PYTHON_SCRIPT="/home/kayu/Desktop/plan/main.py"

            #sleep 3

            # Python ƒCƒ“ƒ^ƒvƒŠƒ^‚ÌƒpƒX‚ðŽw’è
            #PYTHON_EXEC="/usr/bin/python3"

            # Python ƒXƒNƒŠƒvƒg‚ðŽÀs
            #$PYTHON_EXEC $PYTHON_SCRIPT


            plan_bulletin.sh
            #chmod +x ./main.py

            source .venv/bin/activate

            #sleep 4

            python ./main.py

            # Python ƒXƒNƒŠƒvƒg‚ÌƒpƒX‚ðŽw’è
            #PYTHON_SCRIPT="/home/kayu/Desktop/plan/main.py"

            #sleep 3

            # Python ƒCƒ“ƒ^ƒvƒŠƒ^‚ÌƒpƒX‚ðŽw’è
            #PYTHON_EXEC="/usr/bin/python3"

            # Python ƒXƒNƒŠƒvƒg‚ðŽÀs
            #$PYTHON_EXEC $PYTHON_SCRIPT




            weather.sh
            #!/bin/sh
            
            # Python ƒXƒNƒŠƒvƒg‚ÌƒpƒX‚ðŽw’è
            PYTHON_SCRIPT="/home/kayu/Desktop/weather/main.py"
            
            # Python ƒCƒ“ƒ^ƒvƒŠƒ^‚ÌƒpƒX‚ðŽw’è
            PYTHON_EXEC="/usr/bin/python3"
            
            # Python ƒXƒNƒŠƒvƒg‚ðŽÀs
            #$PYTHON_EXEC $PYTHON_SCRIPT
            
            
            # ƒƒOƒtƒ@ƒCƒ‹‚ÌƒpƒX‚ðŽw’è
            #LOG_FILE="/home/kayu/Desktop/main.log"
            
            # Python ƒXƒNƒŠƒvƒg‚ðŽÀs‚µA•W€o—Í‚Æ•W€ƒGƒ‰[‚ðƒƒOƒtƒ@ƒCƒ‹‚ÉƒŠƒ_ƒCƒŒƒNƒg
            #python3 $PYTHON_SCRIPT >> $LOG_FILE 2>&1
            python3 $PYTHON_SCRIPT
            




            

        </p>


        <p class="headline" style="margin-top:40px;">ラズパイ設定</p>
        <p style="margin:2vw 2vw 0px 0vw">
            ということでラズパイの設定をまたいちからしていく．
            raspi imager？でosインストールして接続する．
            まずはipの固定から
            https://qiita.com/mochi_2225/items/15c1e7c1c1ae79f97501
            ここにしたがってIPの固定を終わらせた．


            デフォルトでpython 3.11.2が入っているからpythonに関して特にすることはない．


            vncについて
            https://raspi-school.com/vnc/
            を元に再度設定していく．

            いろいろinstallする前に
            sudo apt update
            sudo apt iupgrade
            を使って更新しておく．
        
            次にgit
            git --versionで確認したところ一応入っているらしい．
            ということでデータをgit clone 
            Please make sure you have the correct access rights
            and the repository exists.
            あたりまえだけどアクセスできないね．うん
            鍵登録とかしようか．
            ssh-keygen -t ed25519 -C "kayuprog@gmail.com"
            cat ~/.ssh/id_ed25519.pub
            をしてキーを作成
            gituhubに登録する．
            詳しくは
            https://note.com/shiny_crocus555/n/n05b00428f1da
            を参照してね．


            いろいろinstallする前に
            sudo apt update
            sudo apt iupgrade
            を使って更新しておく．


            日本語がうまく表示されない
            <!-- https://yagiful.com/blog/raspi-bookworm-japanese/
            を参考にして
            sudo apt install fonts-noto-cjk で東アジアフォントをインストール。
            設定 > 外観の設定 > システム で デフォルトフォントのPibotoLt Regular の代わりに Noto Sans CJK JP Regular を指定。
            すればOK -->

            <!-- https://raspi.ryo.sc/raspi_ipa_font/
            ここをためした．
            だめでした． -->

            これで日本語に対応するようにする．
            https://raspi.taneyats.com/entry/japanese-localization

            日本語入力について
            https://www.indoorcorgielec.com/resources/raspberry-pi/raspberry-pi-input-japanese/#fcitx-icon
            を試してみる．
            うん．これでおっけ．
            ただし，fcitxを起動するために
            左上のraspiマーク→システムツール→fcitxを押す必要がある．
            自動的に実行させたいときは，（ふつうは勝手に自動実行されるはずだが）
            <img src="./img/step1.png" class="imgfullcenter"><br><br>
            <img src="./img/step2.png" class="imgfullcenter"><br><br>
            <img src="./img/step3.png" class="imgfullcenter"><br><br>
            <img src="./img/step4.png" class="imgfullcenter"><br><br>
            <img src="./img/step5.png" class="imgfullcenter"><br><br>
            でrebootすればOK


        </p>
        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:2vw 2vw 0px 0vw">
            kayu@raspberrypi:~/Desktop/youtube_alarm_clock $ sudo pip install TkEasyGUI
            error: externally-managed-environment
            
            Ã— This environment is externally managed
            â•°â”€> To install Python packages system-wide, try apt install
                python3-xyz, where xyz is the package you are trying to
                install.
                
                If you wish to install a non-Debian-packaged Python package,
                create a virtual environment using python3 -m venv path/to/venv.
                Then use path/to/venv/bin/python and path/to/venv/bin/pip. Make
                sure you have python3-full installed.
                
                For more information visit http://rptl.io/venv
            
            note: If you believe this is a mistake, please contact your Python installation or OS distribution provider. You can override this, at the risk of breaking your Python installation or OS, by passing --break-system-packages.
            hint: See PEP 668 for the detailed specification.
            
            というエラーがpip installで出た．
            https://zenn.dev/eng_ryosan/articles/a635346a3123d3
            ここにある通り，解決方法は2つ
            pip install　[パッケージ名] --break-system-packages
            としてinstallするか，
            venvを使うか．
            非常にめんどくさいが，一応環境保護のためにもvenvを使おうと思う．



            kayu@raspberrypi:~/Desktop $ ./alarm.sh
            bash: ./alarm.sh: cannot execute: required file not found
            というエラーが出たときには，
            alarm.sh の改行コードが CRLF（Windows形式）になっている
            dos2unix コマンドを使って改行コードを UNIX 形式（LF）に変換してみよう。
            dos2unix alarm.sh
            とすれば治る．


            以上でとりあえずalarm.shが
            #!/bin/bash
            cd /home/kayu/Desktop/youtube_alarm_clock/
            echo 0>a.txt
            source .venv/bin/activate
            export PYTHONPATH=$VIRTUAL_ENV/lib/python3.11/site-packages
            #export PYTHONPATH=$PYTHONPATH:/home/kayu/.local/lib/python3.12/site-packages
            #python3 /home/kayu/Desktop/youtube_alarm_clock/main.py >> "$LOG_FILE" 2>&1
            python3 /home/kayu/Desktop/youtube_alarm_clock/main.py
            となった．


            plan_bulletin.shは
            #!/bin/bash
            #chmod +x ./main.py
            cd /home/kayu/Desktop/plan_bulletin_raspi
            source .venv/bin/activate

            #sleep 4
            LIBGL_ALWAYS_SOFTWARE=1 python3 ./main.py

            #python ./main.py

            # Python Æ’XÆ’NÆ’Å Æ’vÆ’gâ€šÃŒÆ’pÆ’Xâ€šÃ°Å½wâ€™Ã¨
            #PYTHON_SCRIPT="/home/kayu/Desktop/plan/main.py"

            #sleep 3

            # Python Æ’CÆ’â€œÆ’^Æ’vÆ’Å Æ’^â€šÃŒÆ’pÆ’Xâ€šÃ°Å½wâ€™Ã¨
            #PYTHON_EXEC="/usr/bin/python3"

            # Python Æ’XÆ’NÆ’Å Æ’vÆ’gâ€šÃ°Å½Ã€Âs
            #$PYTHON_EXEC $PYTHON_SCRIPT

            https://monomonotech.jp/kurage/raspberrypi/systemd_autostart.html
            でsystemdによるらずぱい起動時自動事項をする．
        </p>

        <p class="headline" style="margin-top:40px;">空白とかがwindows使用になっているとき</p>
        <p style="margin:2vw 2vw 0px 0vw">
            dos2unix ファイル名
            としたらOK

            ラズパイで音量小さいと思ったらそもそものらずぱいの音量を挙げよう
            
            音量が勝手に朝下がっていることについて
            https://www.st.itc.keio.ac.jp/ja/faq_linux_audio_mute_st.html
            を参照してコマンドで音量をmaxにするように変更した．
        </p>
        <p class="headline" style="margin-top:40px;"></p>
        <p style="margin:2vw 2vw 0px 0vw">
            https://forums.raspberrypi.com/viewtopic.php?t=357129
            によれば，raspi5のGPIOピンからpower supplyできるらしいで，
            ハードオフでACアダプター買ってきて，先っぽをGPIOに接続できるように加工後，やってみたらできた　！
            

            https://forums.raspberrypi.com/viewtopic.php?t=358648
            これを参照しながららずぱいのmenu barに.shを配置した．

            これがyoutube_alarm.desktopの中身
            このファイルは/usr/share/applicationにおく．

            [Desktop Entry]
            Type=Application
            Name=Hello
            Exec=/home/kayu/Desktop/alarm.sh
            Icon=/home/kayu/Desktop/youtube_alarm_clock/icon/clock.png
            Terminal=false
            Categories=Utility;
            

            で，~/.config/wf-panel-pi.iniを

[panel]
launcher_000001=lxde-x-www-browser.desktop
launcher_000002=pcmanfm.desktop
launcher_000003=lxterminal.desktop
launcher_000004=youtube_alarm.desktop
widgets_left=smenu spacing4 launchers spacing8 window-list
widgets_right=tray power ejecter updater spacing2 connect spacing2 bluetooth spacing2 netman spacing2 volumepulse spacing2 clock spacing2 spacing2 squeek
            に書き換える．でtaskbarへの追加は終わり．
        </p>




    <!--topage-->
    <div class="toPagePaRight1">
        <div class="topage "><label for="tab2">To Page 2</label></div>
    </div>
</div>

<!--２ページ目-->
<div id="page2" class="panel">
    <span class="aCUpDate">Posted:&nbsp;2002/09/10</span>&nbsp;&nbsp;
    <span class="aCReUpDate">RePosted:&nbsp;0000/00/00</span>
    <div class="aChead">\\&nbsp;KayuProg&nbsp;&nbsp; Storage&nbsp;//</div><hr class="cp_hr06" />
    <h2 class="aCtitle"><span>02</span>TITLE</h2>
    <img class="aCeyecatch" src="img/" width="%">

    <!--actmaincontents-->
    <p class="headline" style="margin-top:40px;">head</p>
    <br><br><br><br><br><br>
    <br><br><br><br><br><br>
    <br><br><br><br><br><br>
    <br><br><br><br><br><br>
    <br><br><br><br><br><br>

    a
    aa
    abc
    abc


    <!--topages-->
    <div class="toPageFlex">
        <div class="toPagePaLeft">
            <div class="topage "><label for="tab1">To Page 1</label></div>
        </div>
    
        <div class="toPagePaRight">
            <div class="topage "><label for="tab3">To Page 3</label></div>
        </div>    
    </div>
</div>

<!--３ページ目-->
<div id="page3" class="panel">
    <span class="aCUpDate">Posted:&nbsp;2002/09/10</span>&nbsp;&nbsp;
    <span class="aCReUpDate">RePosted:&nbsp;0000/00/00</span>
    <div class="aChead">\\&nbsp;KayuProg&nbsp;&nbsp; Storage&nbsp;//</div><hr class="cp_hr06" />
    <h2 class="aCtitle"><span>03</span>TITLE</h2>
    <img class="aCeyecatch" src="../actConImages/deer2.jpg" >

    <!--actmaincontents-->
    <p class="headline" style="margin-top:40px;">head</p>
    <br><br><br><br><br><br>
    <br><br><br><br><br><br>
    <br><br><br><br><br><br>
    <br><br><br><br><br><br>
    <br><br><br><br><br><br>

    a
    aa
    abc
    abc


    <!--topages-->
    <div class="toPageFlex">
        <div class="toPagePaLeft">
            <div class="topage "><label for="tab2">To Page 2</label></div>
        </div>

        <div class="toPagePaRight">
            <div class="topage "><label for="tab4">To Page 4</label></div>
        </div>
    </div>
</div>

<!--４ページ目-->
<div id="page4" class="panel">
    <span class="aCUpDate">Posted:&nbsp;2002/09/10</span>&nbsp;&nbsp;
    <span class="aCReUpDate">RePosted:&nbsp;0000/00/00</span>
    <div class="aChead">\\&nbsp;KayuProg&nbsp;&nbsp; Storage&nbsp;//</div><hr class="cp_hr06" />
    <h2 class="aCtitle"><span>04</span>TITLE</h2>
    <img class="aCeyecatch" src="../actConImages/deer2.jpg" >

    <!--actmaincontents-->
    <p class="headline" style="margin-top:40px;">head</p>

    <!--topages-->
    <div class="toPageFlex">
        <div class="toPagePaLeft">
            <div class="topage "><label for="tab3">To Page 3</label></div>
        </div>

        <div class="toPagePaRight">
            <div class="topage "><label for="tab5">To Page 5</label></div>
        </div>
    </div>
</div>

<!--５ページ目-->
<div id="page5" class="panel">
    <span class="aCUpDate">Posted:&nbsp;2002/09/10</span>&nbsp;&nbsp;
    <span class="aCReUpDate">RePosted:&nbsp;0000/00/00</span>
    <div class="aChead">\\&nbsp;KayuProg&nbsp;&nbsp; Storage&nbsp;//</div><hr class="cp_hr06" />
    <h2 class="aCtitle"><span>05</span>TITLE</h2>
    <img class="aCeyecatch" src="../actConImages/deer2.jpg" >

    <!--actmaincontents-->
    <p class="headline" style="margin-top:40px;">head</p>


    <!--topages-->
    <div class="toPageFlex">
        <div class="toPagePaLeft">
            <div class="topage "><label for="tab4">To Page 4</label></div>
        </div>

        <div class="toPagePaRight">
            <div class="topage "><label for="tab4">To Page 4</label></div>
        </div>
    </div>
</div>

<!--CSSのほう確認！！！-->



</div><!--pages end-->

</div><!--mainContentsPa end-->




<!----------------------------------------mainContentsend---------------------------------------->
</div><!--bodycontents-->
<div class="bottomBlank"></div>

<!--===============================================================
    footer
===============================================================-->
<div class="footer">
    <!--Waves Container-->
    <div>
    <svg class="waves" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"
    viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
    <defs>
    <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
    </defs>
    <g class="parallax">
    <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(215, 215, 215,0.6)" />
    <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(215, 215, 215,0.6)" />
    <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(215, 215, 215,0.6)" />
    <use xlink:href="#gentle-wave" x="48" y="7" fill="rgba(215, 215, 215,0.6)" />
    </g>
    </svg>
    </div>
    <!--Waves end-->
    <div id="footerContents"> 
        <small>Copyright(c) //  KayuProg  // All right Reserved.</small>
    </div>


 </div>

<!--movebg-->
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script src="../../../common/js/movebg.js"></script><!--ok-->
<!--mainSlider/slick.jsの読み込み-->
<script src="https://cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
<!--mainslider.js-->
</body>


<noscript>
    <p>このサイトではJavaScriptを使用しています。この文章が表示される場合,設定でjavascriptをオンにしてください。
    <br>P.S javascriptが反映されていない場合、このサイトの完成度が格段と下がってしまいます。ぜひともよろしくお願いいたします。  制作者より
    </p>
</noscript>


</html>
